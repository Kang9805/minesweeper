<div class="quick-start-section">
    <h2>ğŸš€ Quick Start</h2>
    <div class="difficulty-buttons">
        <button type="button" 
                class="difficulty-btn"
                hx-get="{% url 'new_game_difficulty' 'easy' %}"
                hx-target="#game-container"
                hx-swap="innerHTML transition:true">
            ğŸŸ¢ Easy<br><small>8Ã—8</small>
        </button>
        <button type="button" 
                class="difficulty-btn"
                hx-get="{% url 'new_game_difficulty' 'medium' %}"
                hx-target="#game-container"
                hx-swap="innerHTML transition:true">
            ğŸŸ¡ Medium<br><small>12Ã—12</small>
        </button>
        <button type="button" 
                class="difficulty-btn"
                hx-get="{% url 'new_game_difficulty' 'hard' %}"
                hx-target="#game-container"
                hx-swap="innerHTML transition:true">
            ğŸ”´ Hard<br><small>16Ã—16</small>
        </button>
    </div>
</div>

<form class="difficulty-form" hx-post="{% url 'new_game' %}" hx-target="#game-container" hx-swap="innerHTML transition:true">
    {% csrf_token %}
    <h2>âš™ï¸ Custom</h2>
    <div class="form-row">
        <div class="form-group">
            <label for="rows">ê°€ë¡œ (rows)</label>
            <input type="number" id="rows" name="rows" min="5" max="30" value="{{ rows }}" required oninput="validateCustomDifficulty()">
        </div>
        <div class="form-group">
            <label for="cols">ì„¸ë¡œ (cols)</label>
            <input type="number" id="cols" name="cols" min="5" max="30" value="{{ cols }}" required oninput="validateCustomDifficulty()">
        </div>
        <div class="form-group">
            <label for="mines">ì§€ë¢° ê°œìˆ˜ (mines)</label>
            <input type="number" id="mines" name="mines" min="1" max="900" value="{{ mines }}" required oninput="validateCustomDifficulty()">
        </div>
    </div>
    <div class="form-row-button">
        <button type="submit" class="btn-start" id="start-btn">ê²Œì„ ì‹œì‘</button>
    </div>
</form>

<script>
function validateCustomDifficulty() {
    const rows = parseInt(document.getElementById('rows').value, 10) || 5;
    const cols = parseInt(document.getElementById('cols').value, 10) || 5;
    const mines = parseInt(document.getElementById('mines').value, 10) || 1;
    const maxMines = rows * cols - 1;

    const minesInput = document.getElementById('mines');
    const startBtn = document.getElementById('start-btn');

    minesInput.max = maxMines;

    const isInvalid = mines > maxMines;
    startBtn.disabled = isInvalid;
    startBtn.style.opacity = isInvalid ? '0.5' : '1';
    startBtn.style.cursor = isInvalid ? 'not-allowed' : 'pointer';
}

document.addEventListener('DOMContentLoaded', validateCustomDifficulty);
</script>
